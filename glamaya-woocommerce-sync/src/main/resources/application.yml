spring:
  application:
    name: glamaya-woocommerce-sync
  kafka:
    bootstrap-servers: ${KAFKA_BOOTSTRAP_SERVERS:127.0.0.1:29092}
    client-id: ${spring.application.name}
    security:
      protocol: ${SPRING_KAFKA_SECURITY_PROTOCOL:PLAINTEXT}
    producer:
      compression-type: zstd
      properties:
        enable.idempotence: true
        linger.ms: 25
        acks: all            # ensure strongest delivery guarantees
        retries: 10          # retry transient failures
        delivery.timeout.ms: 120000 # overall delivery timeout
        request.timeout.ms: 30000   # request timeout for produces
      batch-size: 32768 # fixed from 32KB (must be numeric bytes)
  data:
    mongodb:
      uri: "mongodb-connection-uri"

external:
  woocommerce:
    api:
      url: "https://www.glamaya.com"
      wc-client-key: "enter your key here"
      wc-client-secret: "enter your secret here"
      account-name: "enter your account name here"
  n8n:
    api:
      url: "enter your n8n URL here"

application:
  processing:
    concurrency: 4
    default-fetch-duration-ms: 1000
    backpressure:
      buffer-size: 100
      overflow-strategy: drop
  kafka:
    producer:
      slow-send-threshold-ms: 2000
    topic:
      product-events: woo-product-events
      user-events: woo-user-events
      order-events: woo-order-events
      contact-events: ecommerce-contact-events
      product-events-dlq: woo-product-events-dlq
      user-events-dlq: woo-user-events-dlq
      order-events-dlq: woo-order-events-dlq
  processors:
    woo_product:
      enable: false
      reset-on-startup: false
      page-size: 10
      fetch-duration-ms:
        active: 500
        passive: 60000
      query-url: /wp-json/wc/v3/products
      kafka-topic: woo-product-events
      contact-kafka-topic: ecommerce-contact-events
      n8n:
        enable: false
        webhook-url: "enter your n8n webhook URL here"
        error-webhook-url: "enter your n8n error webhook URL here"
      source-account-name: Glamaya
    woo_user:
      enable: false
      reset-on-startup: false
      page-size: 20
      fetch-duration-ms:
        active: 500
        passive: 60000
      query-url: /wp-json/wc/v3/customers
      kafka-topic: woo-user-events
      contact-kafka-topic: ecommerce-contact-events
      n8n:
        enable: false
        webhook-url: "enter your n8n webhook URL here"
        error-webhook-url: "enter your n8n error webhook URL here"
      source-account-name: Glamaya
    woo_order:
      enable: false
      reset-on-startup: false
      page-size: 10
      fetch-duration-ms:
        active: 1000
        passive: 60000
      query-url: /wp-json/wc/v3/orders
      kafka-topic: woo-order-events
      contact-kafka-topic: ecommerce-contact-events
      n8n:
        enable: false
        webhook-url: "enter your n8n webhook URL here"
        error-webhook-url: "enter your n8n error webhook URL here"
      source-account-name: Glamaya
  webclient:
    response-timeout-in-millis: 30000
    max-in-memory-size-in-bytes: 10485760 # 10MB
